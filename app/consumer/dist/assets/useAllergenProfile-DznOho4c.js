var e=Object.defineProperty,o=Object.defineProperties,r=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(o,r,t)=>r in o?e(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,m=(e,o)=>{for(var r in o||(o={}))n.call(o,r)&&c(e,r,o[r]);if(t)for(var r of t(o))l.call(o,r)&&c(e,r,o[r]);return e},a=(e,t)=>o(e,r(t));import{r as s}from"./react-vendor-DQcjAbTS.js";const i="claimlens_allergen_profile",u={common:[],custom:[]};function p(){const[e,o]=s.useState(()=>{try{const e=localStorage.getItem(i);if(e)return JSON.parse(e)}catch(e){}return u});s.useEffect(()=>{try{localStorage.setItem(i,JSON.stringify(e))}catch(o){}},[e]);return{profile:e,toggleCommonAllergen:e=>{o(o=>a(m({},o),{common:o.common.includes(e)?o.common.filter(o=>o!==e):[...o.common,e]}))},addCustomAllergen:e=>{const r=e.trim();r&&o(e=>e.custom.includes(r)?e:a(m({},e),{custom:[...e.custom,r]}))},removeCustomAllergen:e=>{o(o=>a(m({},o),{custom:o.custom.filter(o=>o!==e)}))},clearAll:()=>{o(u)},exportProfile:()=>{const o=JSON.stringify(e,null,2),r=new Blob([o],{type:"application/json"}),t=URL.createObjectURL(r),n=document.createElement("a");n.href=t,n.download="allergen-profile.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)},importProfile:e=>new Promise((r,t)=>{const n=new FileReader;n.onload=e=>{var n;try{const l=JSON.parse(null==(n=e.target)?void 0:n.result);l&&"object"==typeof l?(o({common:Array.isArray(l.common)?l.common:[],custom:Array.isArray(l.custom)?l.custom:[]}),r()):t(new Error("Invalid profile format"))}catch(l){t(l)}},n.onerror=()=>t(new Error("Failed to read file")),n.readAsText(e)}),getAllergenCount:()=>e.common.length+e.custom.length,getAllAllergens:()=>[...e.common,...e.custom]}}export{p as u};
