var e=Object.defineProperty,l=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,c=(l,s,a)=>s in l?e(l,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[s]=a,n=(e,l)=>{for(var s in l||(l={}))r.call(l,s)&&c(e,s,l[s]);if(a)for(var s of a(l))t.call(l,s)&&c(e,s,l[s]);return e},i=(e,a)=>l(e,s(a));import{j as o}from"./index-Dr5LwVtT.js";import{r as d}from"./react-vendor-DQcjAbTS.js";import{u as m}from"./useAllergenProfile-DznOho4c.js";const u="_container_1blr0_1",_="_header_1blr0_15",h="_title_1blr0_25",p="_description_1blr0_39",b="_count_1blr0_51",x="_section_1blr0_73",j="_sectionTitle_1blr0_81",g="_sectionDescription_1blr0_95",N="_allergenGrid_1blr0_107",v="_customForm_1blr0_117",f="_customInput_1blr0_129",y="_addButton_1blr0_179",C="_customList_1blr0_229",S="_customItem_1blr0_241",A="_customLabel_1blr0_263",P="_removeButton_1blr0_273",k="_actions_1blr0_317",w="_actionButton_1blr0_329",E="_dangerButton_1blr0_371",O="_fileInput_1blr0_391",I="_confirmText_1blr0_399",T="_errorText_1blr0_413",M="_footer_1blr0_427",F="_footerText_1blr0_439",L="_selectWrapper_1blr0_455",U="_selectLabel_1blr0_463",B="_select_1blr0_455",D="_helperText_1blr0_533",G="_toggleGroup_1blr0_547",J="_toggleItem_1blr0_559",$="_toggleInfo_1blr0_595",z="_toggleTitle_1blr0_603",R="_toggleDescription_1blr0_617",H="_switchLabel_1blr0_629",K="_switchInput_1blr0_647",W="_switch_1blr0_629",q="_toggle_1bnr0_1",Y="_checkbox_1bnr0_51",Z="_slider_1bnr0_65",Q="_label_1bnr0_127";function V({allergen:e,checked:l,onChange:s}){return o.jsxs("label",{className:q,children:[o.jsx("input",{type:"checkbox",checked:l,onChange:()=>{s(e)},className:Y,"aria-label":`Toggle ${e} allergen`}),o.jsx("span",{className:Z}),o.jsx("span",{className:Q,children:e})]})}const X=["Peanuts","Tree Nuts","Milk","Eggs","Fish","Shellfish","Soy","Wheat","Sesame"],ee=[{value:"US",label:"United States (FDA)"},{value:"EU",label:"European Union (EFSA)"},{value:"UK",label:"United Kingdom (FSA)"},{value:"CA",label:"Canada (Health Canada)"},{value:"AU",label:"Australia (FSANZ)"},{value:"GLOBAL",label:"Global (All Policies)"}],le="claimlens_app_settings";function se(){const{profile:e,toggleCommonAllergen:l,addCustomAllergen:s,removeCustomAllergen:a,clearAll:r,exportProfile:t,importProfile:c,getAllergenCount:q}=m(),[Y,Z]=d.useState(""),[Q,se]=d.useState(!1),[ae,re]=d.useState(""),te=d.useRef(null),[ce,ne]=d.useState(()=>{try{const e=localStorage.getItem(le);if(e)return JSON.parse(e)}catch(e){}return{jurisdiction:"US",privacySave:!1,reducedMotion:!1}});d.useEffect(()=>{try{localStorage.setItem(le,JSON.stringify(ce)),ce.reducedMotion?(document.documentElement.style.setProperty("--duration-fast","0.01ms"),document.documentElement.style.setProperty("--duration-base","0.01ms"),document.documentElement.style.setProperty("--duration-slow","0.01ms")):(document.documentElement.style.removeProperty("--duration-fast"),document.documentElement.style.removeProperty("--duration-base"),document.documentElement.style.removeProperty("--duration-slow"))}catch(e){}},[ce]);const ie=q();return o.jsxs("div",{className:u,children:[o.jsxs("header",{className:_,children:[o.jsx("h1",{className:h,children:"Settings"}),o.jsx("p",{className:p,children:"Configure your preferences and personalize your experience"})]}),o.jsxs("section",{className:x,children:[o.jsx("h2",{className:j,children:"Allergen Profile"}),o.jsx("p",{className:g,children:"Configure your allergens to personalize scan results"}),ie>0&&o.jsxs("div",{className:b,children:[ie," allergen",1!==ie?"s":""," configured"]})]}),o.jsxs("section",{className:x,children:[o.jsx("h2",{className:j,children:"Common Allergens"}),o.jsx("div",{className:N,children:X.map(s=>o.jsx(V,{allergen:s,checked:e.common.includes(s),onChange:l},s))})]}),o.jsxs("section",{className:x,children:[o.jsx("h2",{className:j,children:"Custom Allergens"}),o.jsxs("form",{onSubmit:e=>{e.preventDefault(),Y.trim()&&(s(Y),Z(""))},className:v,children:[o.jsx("input",{type:"text",value:Y,onChange:e=>Z(e.target.value),placeholder:"Add custom allergen...",className:f,maxLength:50,"aria-label":"Custom allergen input"}),o.jsx("button",{type:"submit",className:y,disabled:!Y.trim(),"aria-label":"Add custom allergen",children:"Add"})]}),e.custom.length>0&&o.jsx("div",{className:C,children:e.custom.map(e=>o.jsxs("div",{className:S,children:[o.jsx("span",{className:A,children:e}),o.jsx("button",{onClick:()=>a(e),className:P,"aria-label":`Remove ${e}`,children:"Ã—"})]},e))})]}),o.jsxs("section",{className:x,children:[o.jsx("h2",{className:j,children:"Manage Profile"}),o.jsxs("div",{className:k,children:[o.jsx("button",{onClick:()=>{t()},className:w,children:"Export Profile"}),o.jsx("button",{onClick:()=>{var e;null==(e=te.current)||e.click()},className:w,children:"Import Profile"}),o.jsx("input",{ref:te,type:"file",accept:".json",onChange:e=>{return l=this,s=null,a=function*(){var l;const s=null==(l=e.target.files)?void 0:l[0];if(s){try{yield c(s),re("")}catch(a){re("Failed to import profile. Please check the file format.")}te.current&&(te.current.value="")}},new Promise((r,t)=>{var c=l=>{try{i(a.next(l))}catch(e){t(e)}},n=l=>{try{i(a.throw(l))}catch(e){t(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(c,n);i((a=a.apply(l,s)).next())});var l,s,a},className:O,"aria-label":"Import profile file"}),o.jsx("button",{onClick:()=>{Q?(r(),se(!1)):se(!0)},className:`${w} ${E}`,children:Q?"Confirm Clear All":"Clear All"})]}),Q&&o.jsx("p",{className:I,children:'Click "Confirm Clear All" again to delete all allergens'}),ae&&o.jsx("p",{className:T,children:ae})]}),o.jsxs("section",{className:x,children:[o.jsx("h2",{className:j,children:"Locale & Jurisdiction"}),o.jsx("p",{className:g,children:"Select which policy packs apply to your scans"}),o.jsxs("div",{className:L,children:[o.jsx("label",{htmlFor:"jurisdiction",className:U,children:"Jurisdiction"}),o.jsx("select",{id:"jurisdiction",value:ce.jurisdiction,onChange:e=>{ne(l=>i(n({},l),{jurisdiction:e.target.value}))},className:B,"aria-label":"Select jurisdiction",children:ee.map(e=>o.jsx("option",{value:e.value,children:e.label},e.value))})]}),o.jsx("p",{className:D,children:"This affects which regulatory policies are applied during analysis"})]}),o.jsxs("section",{className:x,children:[o.jsx("h2",{className:j,children:"Privacy & Accessibility"}),o.jsxs("div",{className:G,children:[o.jsxs("div",{className:J,children:[o.jsxs("div",{className:$,children:[o.jsx("h3",{className:z,children:"Save Scan History"}),o.jsx("p",{className:R,children:"Store your scan results locally for quick access"})]}),o.jsxs("label",{className:H,children:[o.jsx("input",{type:"checkbox",checked:ce.privacySave,onChange:()=>{ne(e=>i(n({},e),{privacySave:!e.privacySave}))},className:K,"aria-label":"Toggle save scan history"}),o.jsx("span",{className:W})]})]}),o.jsxs("div",{className:J,children:[o.jsxs("div",{className:$,children:[o.jsx("h3",{className:z,children:"Reduced Motion"}),o.jsx("p",{className:R,children:"Minimize animations and transitions for accessibility"})]}),o.jsxs("label",{className:H,children:[o.jsx("input",{type:"checkbox",checked:ce.reducedMotion,onChange:()=>{ne(e=>i(n({},e),{reducedMotion:!e.reducedMotion}))},className:K,"aria-label":"Toggle reduced motion"}),o.jsx("span",{className:W})]})]})]})]}),o.jsx("footer",{className:M,children:o.jsx("p",{className:F,children:"Your settings and allergen profile are stored locally on your device and never sent to our servers unless you explicitly opt in."})})]})}export{se as default};
